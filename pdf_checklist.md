# รายงานการตรวจสอบและแก้ไขระบบ PDF (PDF Checklist & Status Report)

## 1. สมุดเงินสด (Cash Book) - `exportReportBuilders.ts`
- [x] **ตรวจสอบขนาดฟอนต์**: ดึงค่าจาก `pdfConfig.ts` ทำงานได้ถูกต้อง
- [x] **ปัญหาที่พบ**: ลายเซ็นและจุดไข่ปลาด้านล่าง (ผู้จัดทำ/ผู้ตรวจสอบ/ผู้อำนวยการ) เริ่มต้นไม่ตรงกัน
- [x] **การแก้ไข**: เปลี่ยนจากการใช้ space padding มาเป็นการคำนวณความกว้างฟอนต์สูงสุด (`roleWidthMax`) และให้จุดไข่ปลากับชื่อตำแหน่งถูกวาดด้วยพิกัดแนวแกน X ที่ถูกล็อคตายตัว
- [x] **สถานะ**: **สมบูรณ์ 100%** (ตัวเอกสารและการเว้นบรรทัดทำงานได้ดี)

## 2. ทะเบียนคุมเงินนอกงบประมาณ (Fund Report) - `exportFundUtils.ts`
- [x] **ตรวจสอบขนาดฟอนต์**: ทำงานปกติ สอดคล้องกับ `pdfConfig.ts`
- [x] **ปัญหาที่พบ**: ลายเซ็นด้านล่างเรียงไม่ตรงกัน เช่นเดียวกับสมุดเงินสด
- [x] **การแก้ไข**: เพิ่มการล็อคตำแหน่ง `roleWidthMax` ให้ลายเซ็นของเจ้าหน้าที่บัญชี ผู้ตรวจ และผู้อำนวยการ เริ่มต้นชิดซ้ายตรงกันทั้งหมด
- [x] **สถานะ**: **สมบูรณ์ 100%**

## 3. รายงานเงินคงเหลือประจำวัน (Daily Report) - `DailyReport.tsx`
- [x] **ตรวจสอบขนาดฟอนต์**: ทำงานปกติ ไม่ตกกรอบ
- [x] **ปัญหาที่พบ**:
  1. โค้ดสร้างลายเซ็นส่วน "ผู้รับเงิน" กับ "หัวหน้าหน่วยงานย่อย" ตอนแรกกึ่งกลางแล้วเบี้ยว
  2. โค้ดแสดง Error TypeScript ตรงการแปลง `Blob`
- [x] **การแก้ไข**:
  1. ปรับวิธีการคำนวณจุดกึ่งกลางร่วม (Center common group) และล็อกตำแหน่งซ้ายให้จุดไข่ปลาและข้อความตำแหน่งตรงกัน
  2. แก้ไข TypeScript Error ตรง `Blob([pdfBytes])` เป็น `Blob([pdfBytes.buffer as ArrayBuffer])` เรียบร้อย
- [x] **สถานะ**: **สมบูรณ์ 100%**

## 4. ใบเสร็จรับเงิน (Revenue Receipt) - `Revenue.tsx`
- [x] **ตรวจสอบขนาดฟอนต์**: ผูกการแสดงผลเข้ากับ `pdfConfig.ts` แล้ว
- [x] **ปัญหาที่พบ**:
  1. ลายเซ็นผู้รับเงินเยื้องตรงแบบ manual (ระบุพิกัด X ตายตัว) ทำให้มีโอกาสเบี้ยวถ้าเปลี่ยนฟอนต์
  2. มี Type Error จาก `Blob`
- [x] **การแก้ไข**: 
  1. เปลี่ยนไปใช้การคำนวณพิกัด `startX + dotW / 2` เพื่อให้อยู่กึ่งกลางพอดีเป๊ะ
  2. แก้ไข TypeScript Error เรียบร้อย
- [x] **สถานะ**: **สมบูรณ์ 100%**

## 5. บันทึกข้อความเบิกจ่าย (Expenditure Memo) - `Expenditure.tsx`
- [x] **ตรวจสอบขนาดฟอนต์**: โยงค่า `PDF_FONTS` เรียบร้อย
- [x] **ปัญหาที่พบ**:
  1. รายการยาวๆ ในบางทีอาจจะเยื้องไม่สวยงาม
  2. อาการ Type Error จาก `Blob`
- [x] **การแก้ไข**: 
  1. ปรับการขึ้นบรรทัดใหม่ และผูกส่วนเซ็นชื่อให้อยู่ตรงกลางจากท้ายเอกสาร
  2. แปลงโค้ด `pdfBytes.buffer as ArrayBuffer` ให้ถูกต้องตามหลัก TypeScript
- [x] **สถานะ**: **สมบูรณ์ 100%**

## 6. ตั้งค่าไฟล์หลัก (PDF Config) - `pdfConfig.ts`
- [x] **ปัญหาที่พบ**: เกิดการพิมพ์ผิดพลาดในระหว่างตั้งค่า (`TABLE_DATA: 1` แทนที่จะเป็น `14`) ทำให้ฟอนต์บางส่วนใน PDF มีขนาดเล็กจนมองไม่เห็น
- [x] **การแก้ไข**: ปรับกลับและล็อกค่าให้เป็นมาตรฐาน (`NORMAL: 16`, `TABLE_DATA: 14`, `TABLE_HEADER: 15`)
- [x] **สถานะ**: **สมบูรณ์ 100%**

-- *สรุปการตรวจเช็คระบบ: พร้อมใช้งานทุกเมนู สร้างออก PDF ได้ถูกต้อง ไร้ข้อความตกหล่นหรือเบี้ยว* --
